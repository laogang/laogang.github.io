#####  1.什么是微服务

```
    微服务架构风格是一种将一个原本独立的系统拆分为多个小型服务，每个服务运行在自己的进程中，服务间通信采用轻量级通信机制（通常是http restful api）。

    被拆分的每一个小型服务都围绕着系统中的某一项或一些耦合度较高的业务功能进行构建，并且每个服务都维护着自身的数据存储、业务开发、自动化测试案例以及独立

   部署机制。由于有了轻量级的通信协议基础，所以这些微服务可以使用不同的语言来编写。

```

#####  2.微服务架构的优点

```
    1.易于开发和维护：一个微服务只关注一个特定的业务功能，所以他的业务清晰，代码量少。开发和维护单个微服务相对简单。而整个应用是由若干个微服务构建而成的所以整个应用也会被维持在一个可控状态。

    2.单个微服务启动较快：单个微服务代码量较少，所以启动会比较快。

    3.局部修改容易部署：单体应用只要修改，就得重新部署整个应用。微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务就可。

    4.技术栈不受限：在微服务架构中，可以结合项目业务及团队的特点，合理的选择技术栈。例如某些服务可使用关系型数据库MySql；某些微服务有图形计算的需求可以使用Neo4j；甚至可根据需要，部分微服务使用java开发，部分微服务使用Node.js开发。

    5.按需伸缩：可根据需求，实现细粒度的扩展。。例如，系统中的某个微服务遇到了瓶颈，可以结合这个微服务的业务特点，增加内存、升级CPU或者是增加节点。

```

#####  3.微服务架构面临的挑战 

```
    1.运维要求较高：更多的服务意味着更多的运维投入。

    2.分布式固有的复杂性：使用微服务构建的是分布式系统。对于一个分布式系统，系统容错，网络延时，分布式事务等都会带来巨大挑战。

    3.接口调整成本高：微服务之间通过接口进行通信。如果修改某一个微服务的API，可能所有使用了该接口的微服务都需要调整。

    4.重复劳动：很多微服务可能都会使用到相同的功能，而这个功能并没有达到分解为一个微服务的程度，这个时候，可能各个微服务都会开发这一功能，从而导致代码重复。尽管可以使用共享库来解决这个问题（例如可以将这个功能封装成公共组件，需要该功能的微服务引进该组件），但共享库在多语言环境下就不一定行得通了。

```

#####   4.微服务设计原则​

```
    1.单一职责原则：单一职责原则指的是一个单元（类、方法或者服务等）只关注整个系统功能中单独、有界限的一部分。单一职责原则可以帮助我们更优雅的开发，更敏捷的交付。

    2.服务自治原则：服务自治是指每个微服务具备独立的业务能力，依赖和运行环境。在微服务架构中，服务是独立的业务单元，应该和其他服务高度解耦。每个微服务从开发、测试、构建、部署，都可以独立运行，而不应该依赖其他的服务。

    3.轻量级通信机制：微服务之间应该使用轻量级的通信机制进行交互，首先是它的体量较轻，其次是它应该是跨语言、跨平台的。例如我们使用的REST协议，就是一个典型的“轻量级通信机制”。微服务架构中，常用的协议有REST AMQP  STOMP MQTT等。

    4.微服务粒度：

    5.容错设计：单体应用中，一般不存在单个组件故障而且他部件还在运行的情况，通常是一挂全挂。而在微服务中，由于服务都运行在独立的进程中，所以存在部分服务出现故障，而其他服务正常运行的情况。比如，当正常运作的服务B调用到故障服务A时，因故障服务A没有返回，线程挂起开始等待，直到超时才能释放，而此时若触发服务B调用服务A的请求来自服务C，而服务C频繁调用服务B时，由于其依赖服务A，大量线程被挂起等待，最后导致服务C也不能正常服务，这时就会出现故障的蔓延。所以，在微服务中，快速检测出故障源并尽可能地自动恢复服务是必须被设计和考虑的。通常，我们都希望在每个服务中实现监控和日志记录的组件，比如服务状态、断路器状态、网络延迟等关键数据的仪表盘登。

```

